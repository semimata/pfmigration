= 移行リハーサル振り返り
:lang: ja
:doctype: book
:author: PSDCD/クラウド開発課
:revnumber: 1.0
:version-label: バージョン
:revdate: 2022年11月2日
:toc: left
:toclevels: 3
:toc-title: 目次
:sectnums:
:chapter-signifier: 章
:sectnumlevels: 4
:table-caption: 表
:imagesdir: images
//:nofooter: yes

== 振り返りの目的
* 11月2日に実施した移行リハーサルの振り返りを行い、ステージング環境で実施する移行作業に向けての [.underline]#改善項目を整理する#

== 移行リハーサル結果概況
* **[.underline]#開始基準および終了基準を充足しているため問題なし#**
* リハーサル環境での開始・終了基準の達成状況は以下の通り

.移行リハーサル開始・終了達成状況
[cols="1,1,4,2",width=100%]
|===
.2+|工程
|環境
.2+^.^|判定基準
.2+^.^|補足
|リハーサル
.6+|開始基準
^|〇 |移行環境の構築が完了している|
^|〇 |移行手順書が関係者でレビューか完了している|
^|〇 |レビュー会議で指摘された内容が移行手順書に反映されている|
^|〇 |移行作業に必要なリソースの準備が完了している|
^|〇 |移行作業時の体制、コミュニケーションルールが規定されている|
^|○|移行作業の予想時間が設定されている|
.4+|完了基準
^|〇 |課題が整理され対応策が決定している|一部課題への残確認が残っているが移行作業への影響はすくないためOKとする
^|〇 |移行手順書に記載した作業がすべて終了している|
^|〇 |移行後のサービス稼働確認が日本・大連で終了している|
^|〇 |移行作業時の時間計測が完了している（リハーサル、STG環境）|
|===

=== 移行作業結果

[cols="1,3a",width=100%]
|===
|作業日時|2022年11月2日　10時50分から15時30分（**作業時間：4時間40分**）
|作業環境|移行リハーサル環境（000374382379）
|作業内容|
* 要冷機器監視システムアプリケーションのバージョンアップ（v1.0.2 → v1.0.3）
|作業者|
* 大連：任
* 日本：河又、伊藤
|===

==== 移行作業詳細

.移行作業詳細
[cols="1,2,1,1,1,1"]
|===
|No|作業項目|開始時間|終了時間|作業時間|補足
|{counter: work}|データバックアップ作業およびRDSセキュリティグループ変更|10時50分|11時2分|12分|
|{counter: work}|アプリケーションデプロイ|12時20分|12時45分|25分|
|{counter: work}|API Gateway変更作業|12時54分|13時8分|14分|
|{counter: work}|アプリケーション確認|13時30分|15時30分|120分|30分は課題解決を実施
|===

[%always]
<<<
=== 課題

.課題一覧
[cols="1,2,5a,3a"]
|===
|No|分類|課題内容|対応案
|{counter: issue}|確認テスト手順（日本）|
* 手順書に記載されている確認手順が詳細ではないため、確認作業を行うことが難しい|日本側で確認作業を実施するかを検討する
|{counter: issue}|コミュケーション|

* 移行作業中にリアルタイムでコミュケーションするツールがない|次回作業までにツール検討を行う

** Mail + Teams + Redmineで対応する
|{counter: issue}|アプリケーション|
* SW v.1.0.2 → 1.0.3 への移行時に問題が発生
* 警報情報（ID変換サービスを停止ことにより発生）
* device_info_tblにID情報をコピーは不要| アプリケーション改修にて対応
|{counter: issue}|実行権限|
* lambdaのロールの問題 （apl serverの lambda function invokeの権限が不足）| 権限を追加して対応
|{counter: issue}|実行権限|
* lambdaのロールの問題 （device_server secret managerの呼び出し権限が不足）| 権限を追加して対応
|{counter: issue}|通信課題|
* Lambdaデプロイ作業時に設備との通信が遮断されたかを確認する|（継続確認）

|===
